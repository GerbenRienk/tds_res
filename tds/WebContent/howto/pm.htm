<html>
<head>
<title>Message handling example</title>
<meta content="text/html; charset=utf-8" />
<script type="text/javascript">    
function postItToOC () {            
    // start by taking the query string and from that the part after
    // item=
    // and that should be something like mainForm.input4343
    var mes=window.location.search;
    mes=mes.substring(mes.indexOf("item=")+5);
	// now read the choice of the select
	var select = document.getElementById ("mySelect");
	// and concatenate the value with mes
    mes=mes + ":" + select.value;
    // mes is now something like
    // mainForm.input4343:2
    window.opener.postMessage (mes, "*");        
}
</script>
<link rel="stylesheet" type="text/css" media="screen, projection" href="/tds/css/screen.css" />
<script src="/tds/js/ga.js" type="text/javascript"></script>
</head>
<body>
<div id="wrap" class="group">
	
	<div class="main">		
		
		<div class="entry group">

<p>This is an example of the method to use if you want to insert a value from another page/URL into an item of an OpenClinica-form</p>
    <select id="mySelect">
        <option value="1">First option</option>
        <option value="2">Second option</option>
        <option value="3">Third option</option>
    </select>
    <button onclick="postItToOC ();">Post it to OC</button>
    <p>This form is opened when the user clicks on the link in the form.<br />
    Then when one of the options is chosen and the user clicks on the button "Post it to OC" a script is run.<br/>
    This script executes the postMessage and returns the value of the option to the OpenClinica-form.
    </p>
    <p>Detailed information can be found on the <a href='http://www.trialdatasolutions.com/tds/howto/postmessage.jsp' target='_blank'>
    postmessage.jsp</a> in the how-to section of the site.</p>
<pre>
&lt;script type="text/javascript"&gt;    
function postItToOC () {            
    // start by taking the query string and from that the part after
    // item=
    // and that should be something like mainForm.input4343
    var mes=window.location.search;
    mes=mes.substring(mes.indexOf("item=")+5);
	// now read the choice of the select
	var select = document.getElementById ("mySelect");
	// and concatenate the value with mes
    mes=mes + ":" + select.value;
    // mes is now something like
    // mainForm.input4343:2
    window.opener.postMessage (mes, "*");        
}
&lt;/script&gt;

</pre>
</div>
</div>
</div>    
</body>
</html>